"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.$locf = void 0;
var util_1 = require("../../util");
var accumulator_1 = require("../accumulator");
var _internal_1 = require("./_internal");
/**
 * Last observation carried forward. Sets values for null and missing fields in a window to the last non-null value for the field.
 */
function $locf(_, collection, expr, options) {
    return (0, _internal_1.withMemo)(collection, expr, function () {
        var values = (0, accumulator_1.$push)(collection, expr.inputExpr, options);
        for (var i = 1; i < values.length; i++) {
            if ((0, util_1.isNil)(values[i]))
                values[i] = values[i - 1];
        }
        return values;
    }, function (series) { return series[expr.documentNumber - 1]; });
}
exports.$locf = $locf;
